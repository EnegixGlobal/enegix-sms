{% extends 'base2.html' %}
{% block content %}

<div class="container mt-4">
  <div class="card shadow">

    <div class="card-header bg-success text-white">
      <h5 class="mb-0">
        üö™ {% if room %}Edit{% else %}Add{% endif %} Room
      </h5>
    </div>

    <div class="card-body">

      {% if error %}
        <div class="alert alert-danger">
          ‚ö†Ô∏è {{ error }}
        </div>
      {% endif %}

      <form method="post">
        {% csrf_token %}

        <!-- Hostel -->
        <div class="mb-3">
          <label class="form-label">Hostel</label>
          <select name="hostel" class="form-control" required>
            <option value="">-- Select Hostel --</option>
            {% for h in hostels %}
              <option value="{{ h.id }}"
                {% if room and room.hostel.id == h.id %}selected{% endif %}>
                {{ h.name }}
              </option>
            {% endfor %}
          </select>
        </div>

        <!-- Room No -->
        <div class="mb-3">
          <label class="form-label">Room Number</label>
          <input type="text" name="room_no" class="form-control"
                 value="{{ room.room_no|default:'' }}" required>
        </div>

        <!-- Capacity -->
        <div class="mb-3">
          <label class="form-label">Capacity</label>
          <input type="number" name="capacity" class="form-control"
                 value="{{ room.capacity|default:'' }}" required>
        </div>

        <!-- Occupied -->
        <div class="mb-3">
          <label class="form-label">Occupied</label>
          <input type="number" name="occupied" class="form-control"
                 value="{{ room.occupied|default:0 }}" required>
          <small class="text-muted">
            Occupied must be less than or equal to capacity
          </small>
        </div>

        <!-- Buttons -->
        <div class="d-flex justify-content-between">
          <a href="{% url 'room_list' %}" class="btn btn-secondary">‚¨Ö Back</a>
          <button class="btn btn-success">üíæ Save Room</button>
        </div>

      </form>
    </div>
  </div>
</div>

{% endblock %}
