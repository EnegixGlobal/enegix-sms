{% extends 'base2.html' %}
{% block content %}

<style>
  .page-header {
    background: linear-gradient(135deg, #4e73df, #1cc88a);
    color: white;
    border-radius: 16px;
    padding: 18px 22px;
  }

  .filter-card {
    border-radius: 14px;
    border: none;
  }

  .filter-card .form-control {
    border-radius: 10px;
  }

  .btn-round {
    border-radius: 30px;
    font-weight: 600;
  }

  table thead {
    background: #343a40;
    color: #fff;
  }

  table tbody tr:hover {
    background-color: #f5f7ff;
    transition: 0.2s;
  }

  .badge-time {
    background: #e3f2fd;
    color: #0d6efd;
    padding: 6px 10px;
    border-radius: 20px;
    font-weight: 600;
  }
</style>

<div class="container mt-4">

  <!-- Header -->
  <div class="page-header d-flex justify-content-between align-items-center shadow mb-4">
    <div>
      <h5 class="mb-0">üìÖ Class Timetable</h5>
      <small>Manage class-wise timetable schedule</small>
    </div>
    <a href="{% url 'add_timetable' %}" class="btn btn-light btn-round">
      ‚ûï Add Timetable
    </a>
  </div>

  <!-- Filter -->
  <div class="card filter-card shadow-sm mb-4">
    <div class="card-body">
      <form method="GET" class="row g-3 align-items-end">
        <div class="col-md-4">
          <label class="fw-semibold">Class</label>
          <select name="class" class="form-control">
            <option value="">Select Class</option>
            {% for c in classes %}
              <option value="{{ c.id }}" {% if selected_class == c.id|stringformat:"s" %}selected{% endif %}>
                {{ c.name }}
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="col-md-4">
          <label class="fw-semibold">Section</label>
          <select name="section" class="form-control">
            <option value="">Select Section</option>
            {% for s in sections %}
              <option value="{{ s.id }}" {% if selected_section == s.id|stringformat:"s" %}selected{% endif %}>
                {{ s.name }}
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="col-md-4">
          <button class="btn btn-primary w-100 btn-round">
            üîç Apply Filter
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Table -->
  <div class="card shadow-sm border-0">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle text-center mb-0">
          <thead>
            <tr>
              <th>Day</th>
              <th>Subject</th>
              <th>Class - Section</th>
              <th>Teacher</th>
              <th>Time</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for t in timetables %}
            <tr>
              <td><strong>{{ t.day }}</strong></td>
              <td>{{ t.subject }}</td>
              <td>{{ t.section }}</td>
              <td>{{ t.teacher_name }}</td>
              <td>
                <span class="badge-time">
                  {{ t.start_time }} - {{ t.end_time }}
                </span>
              </td>
              <td>
                <a href="{% url 'edit_timetable' t.id %}" class="btn btn-sm btn-warning btn-round">
                  ‚úè Edit
                </a>
                <a href="{% url 'delete_timetable' t.id %}"
                   class="btn btn-sm btn-danger btn-round"
                   onclick="return confirm('Are you sure you want to delete this timetable?');">
                  üóë Delete
                </a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="6" class="text-muted py-4">
                ‚ùå No Timetable Found
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div>

{% endblock %}
